<!DOCTYPE html>
<html xmlns:itranswarp="http://www.itranswarp.com/" {{ __website__.xmlns|safe }}>

<!--
{% macro pagination(page_obj, url) %}
    {% set pageIndex = page_obj.pageIndex %}
    {% set range = page_obj.range() %}
    <div class="x-pagination pagination">
        <ul>
        {% if page_obj.pageIndex > 1 %}
            <li><a href="{{ url|safe }}{{ page_obj.pageIndex - 1 }}">← 上一页</a></li>
        {% endif %}
        {% for index in range %}
            {% if index == pageIndex %}
                <li class="active"><span>{{ index }}</span></li>
            {% elif index %}
                <li><a href="{{ url|safe }}{{ index }}">{{ index }}</a></li>
            {% else %}
                <li class="disabled"><span>...</span></li>
            {% endif %}
        {% endfor %}
            {% if page_obj.pageIndex < page_obj.totalPages %}
                <li><a href="{{ url|safe }}{{ page_obj.pageIndex + 1 }}">下一页 →</a></li>
            {% endif %}
        </ul>
    </div>
{% endmacro %}

{% macro makeComments(url, comments) %}

<form class="x-comment-box x-auth-not-signed">
    <div class="x-comment-signin">
        <p>请登录后发表评论：</p>
    {% for s in __signins__ %}
        <p><a href="#0" onclick="authFrom('{{ s }}')"><img src="/static/themes/default/img/signin.{{ s }}.large.png" /></a></p>
    {% endfor %}
    </div>
</form>

<form url="{{ url }}" onsubmit="return create_comment(this);" class="x-comment-box x-auth-signed x-comment-form">
    <div class="x-comment-user-img">
        <img src="about:blank" class="x-user-image x-user-image-small" />
    </div>
    <div class="x-comment-input-area">
        <div class="x-comment-prompt">
            <span class="x-user-name"><script> document.write(g_user_name); </script></span> <span class="x-comment-error"></span>
        </div>
        <div class="x-comment-input">
            <textarea name="content" placeholder="{{ _('Say something') }}..." rows="4"></textarea>
        </div>
        <div class="x-comment-submit">
            <span>评论将自动同步至微博，请发表有价值的信息。</span>
            <button type="submit" class="btn btn-primary"><i class="icon-ok icon-white"></i> {{ _('Comment') }}</button>
        </div>
    </div>
</form>

<div class="x-comments-list"></div>

<script>

$(function() {
    var $list = $('div.x-comments-list');
    {% for c in comments %}
    $list.append(addComment({
        'id': '{{ c.id }}',
        'user_id': '{{ c.user_id }}',
        'user_name': '{{ c.user_name }}',
        'user_image_url': '{{ c.user_image_url }}',
        'created_at': {{ c.created_at }},
        'content': {{ c.content|json|safe }}
    }));
    {% endfor %}
    {% if __user__ and __user__.role===0 %}
    $('a.x-delete-comment').css('display', '');
    {% endif %}
});

</script>

{% endmacro %}
-->

<head>
    <meta charset="utf-8" />
    <title>{% block title %} ??? {% endblock %} - {{ __website__.name }}</title>
    <meta name="keywords" content="{{ __website__.keywords }}" />
    <meta name="description" content="{{ __website__.description }}" />
    {% block meta %}<!-- block meta  -->{% endblock %}
    <!--[if lt IE 9]>
        <script src="/static/themes/{{ __theme__ }}/static/js/html5.js"></script>
    <![endif]-->
    <link rel="stylesheet" href="/static/themes/{{ __theme__ }}/css/itranswarp.css" />
    <link rel="alternate" href="/feed" title="{{ __website__.name }}" type="application/rss+xml" />

    <script src="/static/themes/{{ __theme__ }}/js/jquery.js"></script>
    <script src="/static/themes/{{ __theme__ }}/js/uikit.js"></script>
    
    <style>
{% if __user__ %}
        .x-display-if-not-signin { display: none; }
{% else %}
        .x-display-if-signin { display: none; }
{% endif %}
    </style>
    <script>
        var g_time = parseFloat('{{ __time__ }}');
//{% if __user__ %}
        var g_user_name = '{{ __user__.name|addslashes }}';
        var g_user_image = '{{ __user__.image_url }}';
//{% else %}
        var g_user_name = '';
        var g_user_image = 'about:blank';
//{% endif %}
    </script>
    {% set __sidebar_left__ = true %}
    {% set __sidebar_left_width__ = '300px' %}
    {% set __sidebar_left_padding__ = true %}
    {% set __sidebar_right__ = true %}
    {% set __sidebar_right_width__ = '200px' %}
    {% set __sidebar_right_padding__ = true %}
    {% block beforehead %}<!-- before head  -->{% endblock %}
    {% block head %}<!-- head  -->{% endblock %}
    <!-- BEGIN custom_header -->
    {{ __website__.custom_header|safe }}
    <!-- END custom_header -->
</head>
<body>
    <div class="x-goto-top">
        <div class="x-arrow"></div>
        <div class="x-stick"></div>
    </div>

    <div id="header" class="uk-navbar uk-navbar-attached">
        <div class="uk-container x-container">
            <div class="uk-navbar uk-navbar-attached">
                <a href="/" class="uk-navbar-brand uk-hidden-small">{{ __website__.name }}</a>
                <a href="/" class="uk-navbar-brand uk-visible-small"><i class="uk-icon-home"></i></a>
                <ul id="ul-navbar" class="uk-navbar-nav uk-hidden-small">
                    <li><a href="/">NAV MENU</a></li>

                    {% for nav in __navigations__ %}
                    <li><a href="{{ nav.url }}">{{ nav.name|e }}</a></li>
                    {% endfor %}
                </ul>
                <ul class="uk-navbar-nav uk-visible-small">
                    <li class="uk-parent" data-uk-dropdown>
                        <a href="#0"><i class="uk-icon-navicon"></i></a>
                        <div class="uk-dropdown uk-dropdown-navbar">
                            <ul class="uk-nav uk-nav-navbar">
                                <li><a href="/">Home</a></li>
                                {% for nav in __navigations__ %}
                                <li><a href="{{ nav.url }}">{{ nav.name|e }}</a></li>
                                {% endfor %}
                            </ul>
                        </div>
                    </li>
                </ul>

                <div class="uk-navbar-content uk-hidden-small">
                    <form id="form-search" class="uk-form uk-margin-remove uk-display-inline-block">
                        <input type="text" placeholder="Search">
                    </form>
                </div>

                <div class="uk-navbar-flip x-hidden-tiny">
                    <ul class="uk-navbar-nav">
                        <li class="uk-parent x-display-if-signin" data-uk-dropdown>
                            <a href="#0"><i class="uk-icon-user"></i> <span class="x-user-name"></span></a>
                            <div class="uk-dropdown uk-dropdown-navbar">
                                <ul class="uk-nav uk-nav-navbar">
                                    <li><a target="_blank" href="/my/courses"><i class="uk-icon-list-ul"></i> 我的课程</a></li>
                                    <li><a target="_blank" href="/my/profile"><i class="uk-icon-cogs"></i> 个人设置</a></li>
                                    <li class="uk-nav-divider"></li>
                                    <li><a href="/auth/signout"><i class="uk-icon-power-off"></i> 安全注销</a></li>
                                </ul>
                            </div>
                        </li>
                        <li class="x-display-if-not-signin uk-hidden-small"><a href="javascript:showSignin()"><i class="uk-icon-sign-in"></i> Sign In</a></li>
                        <li class="x-display-if-not-signin uk-visible-small"><a href="javascript:showSignin()"><i class="uk-icon-sign-in"></i></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div><!-- // header -->

    <div id="main">
        <div class="x-placeholder-50"><!-- placeholder --></div>
        <div class="x-placeholder"><!-- placeholder --></div>
        <div class="uk-container x-container">
            <div class="uk-grid">
                <div class="uk-width-1-1">
                    {% block body_before %}{% endblock %}
                </div>
            </div>
            <div class="uk-flex">
            {% if __sidebar_left__ %}
                {% block sidebar %}
                <div class="uk-width-1-1 uk-margin-right uk-hidden-small x-sidebar-left {% if !__sidebar_padding__ %}x-sidebar-no-padding{% endif %}" style="width:{{ __sidebar_left_width__ }}">
                    <div class="uk-clearfix">
                        {% block sidebar_before %}{% endblock %}
                    </div>
                    <h3>LEFT</h3>
                    {% block sidebar_content %}
                    {% endblock %}
                    <div class="uk-clearfix">
                        {% block sidebar_after %}{% endblock %}
                    </div>
                </div>
                {% endblock %}
            {% endif %}
                <div class="uk-width-1-1 uk-flex-item-auto" style="flex-shrink:1000">
                    <div class="uk-clearfix">
                        {% block main_content_before %}{% endblock %}
                    </div>
                    {% block main_content %} MAIN {% endblock %}
                    <div class="uk-clearfix">
                        {% block main_content_after %}{% endblock %}
                    </div>
                </div>
            {% if __sidebar_right__ %}
                {% block sidebar %}
                <div class="uk-width-1-1 uk-margin-right uk-hidden-small x-sidebar-right {% if !__sidebar_right_padding__ %}x-sidebar-no-padding{% endif %}" style="width:{{ __sidebar_right_width__ }}">
                    <div class="uk-clearfix">
                        {% block sidebar_before %}{% endblock %}
                    </div>
                    <h3>LEFT</h3>
                    {% block sidebar_content %}
                    {% endblock %}
                    <div class="uk-clearfix">
                        {% block sidebar_after %}{% endblock %}
                    </div>
                </div>
                {% endblock %}
            {% endif %}
            </div>
            <div class="uk-grid">
                <div class="uk-width-1-1">
                    {% block body_after %}{% endblock %}
                </div>
            </div>
        </div>
        <div id="push"></div>
    </div>

    <div id="footer">
        <div class="x-placeholder"><!-- placeholder --></div>
        <div class="uk-container x-container">
            <hr>
            <div class="uk-flex">
                <div class="uk-width-1-1 uk-flex-item-auto">
                    <p>
                        <a href="/">{{ __website__.name }}</a>&copy;2015
                        <br>
                        Powered by <a href="http://js.itranswarp.com" target="_blank">iTranswarp.js</a>
                    </p>
                </div>
                <div class="uk-width-small-1-2 uk-width-medium-1-3 x-hidden-tiny">
                    <a href="/feed" target="_blank" class="uk-icon-button uk-icon-rss" data-uk-tooltip title="Subscribe the RSS"></a>
                    <a href="https://github.com/michaelliao/itranswarp.js" target="_blank" class="uk-icon-button uk-icon-github" data-uk-tooltip title="View source code on GitHub"></a>
                    <a href="https://twitter.com/liaoxuefeng" target="_blank" class="uk-icon-button uk-icon-twitter" data-uk-tooltip title="Follow author on Twitter"></a>
                    <a href="http://www.weibo.com/liaoxuefeng" target="_blank" class="uk-icon-button uk-icon-weibo uk-visible-large uk-hidden-medium" data-uk-tooltip title="Follow author on Weibo"></a>
                </div>
                <div class="uk-width-medium-1-4 uk-hidden-small">
                    <p>
                        <a href="https://github.com/michaelliao/itranswarp.js/issues" target="_blank">Feedback</a>
                        <br>
                        <a href="https://github.com/michaelliao/itranswarp.js/blob/master/LICENSE" target="_blank">License</a>
                    </p>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
